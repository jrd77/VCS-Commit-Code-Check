<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.atzuche.order.cashieraccount.mapper.MemberSecondSettleMapper">

    <insert id="insertSelective" parameterType="com.atzuche.order.cashieraccount.entity.MemberSecondSettleEntity" useGeneratedKeys="true" keyProperty="id">
        insert into member_second_settle
        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="orderNo != null">`order_no`, </if>
            <if test="memNo != null">`mem_no`, </if>
            <if test="isSecondFlow != null">`is_second_flow`, </if>
            <if test="settleType != null">`settle_type` </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="orderNo != null">#{orderNo},  </if>
            <if test="memNo != null">#{memNo},  </if>
            <if test="isSecondFlow != null">#{isSecondFlow},  </if>
            <if test="settleType != null">#{settleType}</if>
        </trim>
    </insert>

    <select id="getMemberSecondSettleEntityNumber" resultType="java.lang.Integer">
         select count(id) from member_second_settle where order_no = #{orderNo} and settle_type = #{settleType}
    </select>


    <select id="selectByCondition" resultType="java.lang.Integer">
         select
            count(id)
        from
            member_second_settle
        where
            `order_no` = #{orderNo}
             and `settle_type` = #{settleType}
             and `is_second_flow` = #{isSecondFlow}
    </select>
    
</mapper>