<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.atzuche.order.renterwz.mapper.RenterOrderWzEverydayTodoMapper">
	<sql id="select_column">
		id,order_no,car_no,car_plate_num,rent_time,revert_time,renter_no,renter_phone,frame_no,engine_num,status,city_name,cities,create_op,create_time,update_time,update_op,is_delete
	</sql>

	<resultMap id = "selectColumnMap" type="com.atzuche.order.renterwz.entity.RenterOrderWzEverydayTodoEntity">
		<result property="id" column="id"/>
		<result property="orderNo" column="order_no"/>
		<result property="carNo" column="car_no"/>
		<result property="carPlateNum" column="car_plate_num"/>
		<result property="rentTime" column="rent_time"/>
		<result property="revertTime" column="revert_time"/>
		<result property="renterNo" column="renter_no"/>
		<result property="renterPhone" column="renter_phone"/>
		<result property="frameNo" column="frame_no"/>
		<result property="engineNum" column="engine_num"/>
		<result property="status" column="status"/>
		<result property="cityName" column="city_name"/>
		<result property="cities" column="cities"/>
		<result property="createOp" column="create_op"/>
		<result property="createTime" column="create_time"/>
		<result property="updateTime" column="update_time"/>
		<result property="updateOp" column="update_op"/>
		<result property="isDelete" column="is_delete"/>
	</resultMap>

	<resultMap id="BaseResultMap" type="com.atzuche.order.renterwz.vo.IllegalToDO">
		<id column="id" property="id"/>
		<result column="order_no" property="orderNo"/>
		<result column="car_no" property="regNo"/>
		<result column="car_plate_num" property="plateNum"/>
		<result column="rent_time" property="rentTime"/>
		<result column="renter_no" property="rentNo"/>
		<result column="renter_phone" property="renterPhone"/>
		<result column="revert_time" property="revertTime"/>
		<result column="frame_no" property="frameNo"/>
		<result column="engine_num" property="engineNum"/>
		<result column="status" property="status"/>
		<result column="city_name" property="cityName"/>
		<result column="cities" property="cities"/>
	</resultMap>

	<insert id="saveRenterOrderWzEverydayTodo" parameterType="com.atzuche.order.renterwz.entity.RenterOrderWzEverydayTodoEntity" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
		insert into renter_order_wz_everyday_todo(
			<if test="orderNo != null">
				order_no,
			</if>
			<if test="carNo != null">
				car_no,
			</if>
			<if test="carPlateNum != null">
				car_plate_num,
			</if>
			<if test="rentTime != null">
				rent_time,
			</if>
			<if test="revertTime != null">
				revert_time,
			</if>
			<if test="renterNo != null">
				renter_no,
			</if>
			<if test="renterPhone != null">
				renter_phone,
			</if>
			<if test="frameNo != null">
				frame_no,
			</if>
			<if test="engineNum != null">
				engine_num,
			</if>
			<if test="status != null">
				status,
			</if>
			<if test="cityName != null">
				city_name,
			</if>
			<if test="cities != null">
				cities,
			</if>
			<if test="createOp != null">
				create_op,
			</if>
			<if test="updateTime != null">
				update_time,
			</if>
			<if test="updateOp != null">
				update_op,
			</if>
			<if test="isDelete != null">
				is_delete,
			</if>
			create_time
		) values (
			<if test="orderNo != null">
				#{orderNo},
			</if>
			<if test="carNo != null">
				#{carNo},
			</if>
			<if test="carPlateNum != null">
				#{carPlateNum},
			</if>
			<if test="rentTime != null">
				#{rentTime},
			</if>
			<if test="revertTime != null">
				#{revertTime},
			</if>
			<if test="renterNo != null">
				#{renterNo},
			</if>
			<if test="renterPhone != null">
				#{renterPhone},
			</if>
			<if test="frameNo != null">
				#{frameNo},
			</if>
			<if test="engineNum != null">
				#{engineNum},
			</if>
			<if test="status != null">
				#{status},
			</if>
			<if test="cityName != null">
				#{cityName},
			</if>
			<if test="cities != null">
				#{cities},
			</if>
			<if test="createOp != null">
				#{createOp},
			</if>
			<if test="updateTime != null">
				#{updateTime},
			</if>
			<if test="updateOp != null">
				#{updateOp},
			</if>
			<if test="isDelete != null">
				#{isDelete},
			</if>
			NOW())
	</insert>

	<select id="queryRenterOrderWzEverydayTodoById" resultType="com.atzuche.order.renterwz.entity.RenterOrderWzEverydayTodoEntity">
		select <include refid="select_column" />
		from renter_order_wz_everyday_todo
		where id = #{id} and is_delete = 0
	</select>

	<select id="queryList" resultType="com.atzuche.order.renterwz.entity.RenterOrderWzEverydayTodoEntity">
		select <include refid="select_column" />
		from renter_order_wz_everyday_todo
		where is_delete = 0
	</select>

	 <update id="updateRenterOrderWzEverydayTodo" parameterType="com.atzuche.order.renterwz.entity.RenterOrderWzEverydayTodoEntity">
		update renter_order_wz_everyday_todo set
		<if test="orderNo != null">
			order_no = #{orderNo},
		</if>
		<if test="carNo != null">
			car_no = #{carNo},
		</if>
		<if test="carPlateNum != null">
			car_plate_num = #{carPlateNum},
		</if>
		<if test="rentTime != null">
			rent_time = #{rentTime},
		</if>
		<if test="revertTime != null">
			revert_time = #{revertTime},
		</if>
		<if test="renterNo != null">
			renter_no = #{renterNo},
		</if>
		<if test="renterPhone != null">
			renter_phone = #{renterPhone},
		</if>
		<if test="frameNo != null">
			frame_no = #{frameNo},
		</if>
		<if test="engineNum != null">
			engine_num = #{engineNum},
		</if>
		<if test="status != null">
			status = #{status},
		</if>
		<if test="cityName != null">
			city_name = #{cityName},
		</if>
		<if test="cities != null">
			cities = #{cities},
		</if>
		<if test="createOp != null">
			create_op = #{createOp},
		</if>
		<if test="createTime != null">
			create_time = #{createTime},
		</if>
		<if test="updateOp != null">
			update_op = #{updateOp},
		</if>
		<if test="isDelete != null">
			is_delete = #{isDelete},
		</if>
		update_time = NOW()
		where id = #{id} and is_delete = 0
	</update>

	 <update id="deleteRenterOrderWzEverydayTodoById" parameterType="java.lang.Long">
		update renter_order_wz_everyday_todo set
		is_delete = 1,
		update_time = NOW()
		where id = #{id} and is_delete = 0
	</update>

	<select id="queryToday" resultMap="BaseResultMap">
		SELECT * FROM renter_order_wz_everyday_todo WHERE to_days(create_time) = to_days(now()) AND is_delete = 0
	</select>

	<insert id="batchInsert" parameterType="list">
		insert into renter_order_wz_everyday_todo (
		order_no,
		car_no,
		car_plate_num,
		rent_time,
		renter_no,
		renter_phone,
		revert_time,
		frame_no,
		engine_num,
		status,
		city_name,
		cities,
		is_delete,
		create_time
		) values
		<foreach collection="list" item="param" index="index" separator=",">
			(
			#{param.orderNo},
			#{param.regNo},
			#{param.plateNum},
			#{param.rentTime},
			#{param.rentNo},
			#{param.renterPhone},
			#{param.revertTime},
			#{param.frameNo},
			#{param.engineNum},
			#{param.status},
			#{param.cityName},
			#{param.cities},
			0,
			NOW()
			)
		</foreach>
	</insert>

	<select id="queryEveryDayToDo" resultMap="BaseResultMap">
		SELECT * FROM renter_order_wz_everyday_todo WHERE status = 0 or status is null AND is_delete = 0
	</select>

	<update id="updateStatus" parameterType="java.lang.Integer">
		UPDATE renter_order_wz_everyday_todo set status = 1 where id = #{id}
	</update>

</mapper>
